{"version":3,"file":"js/445.336adcc3.js","mappings":"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","sources":["webpack://andago-client/./src/components/TopUpModal.vue?c96d","webpack://andago-client/./src/components/TopUpModal.vue","webpack://andago-client/./src/views/test/TopUpModalTestPage.vue?f1ce","webpack://andago-client/./src/views/test/TopUpModalTestPage.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"Enter Top-Up Amount\", -1)\n\nimport { IonModal, IonButton, IonText, IonContent, IonList, IonItem, IonLabel, IonInput, IonHeader, IonToolbar, IonTitle, IonButtons } from '@ionic/vue';\r\nimport { ref, onMounted } from 'vue';\r\nimport { useMainStore } from '@/store';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TopUpModal',\n  props: {\r\n  isOpen: Boolean,\r\n},\n  emits: ['update:isOpen', 'confirm', 'cancel'],\n  setup(__props, { emit }) {\n\nconst props = __props;\n\r\nconst store = useMainStore();\r\n\r\n\r\n\r\nconst topUpAmount = ref(0);\r\n\r\n\r\n\r\nfunction closeModal() {\r\n  emit('update:isOpen', false);\r\n}\r\n\r\nasync function getSuggestedTopUpAmount() {\r\n  store.axios.post('/passengers/payments/getSuggestedTopUpAmount')\r\n    .then((response) => {\r\n      const data = response.data;\r\n\r\n      console.log(data);\r\n\r\n      topUpAmount.value = data.suggestedTopUpAmount;\r\n    })\r\n    .catch((error) => {\r\n      console.log(error)\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n  getSuggestedTopUpAmount();\r\n})\r\n\r\nconst topUp = () => {\r\n  store.axios.post('/passengers/payments/topUp', {\r\n    topUpAmount: topUpAmount.value,\r\n  })\r\n    .then((response) => {\r\n      const data = response.data;\r\n      console.log(data);\r\n      store.browser.open({\r\n        url: data.item.url,\r\n      });\r\n\r\n      store.echo.private(`PassengerChannel-${store.profile.id}`).listen('.PaymentSuccessEvent', async (e: any) => {\r\n        console.log(e);\r\n        store.browser.close();\r\n        const toast = await store.showToast({\r\n          message: 'Top Up Successful',\r\n          color: 'success',\r\n          duration: 1000,\r\n          position: 'middle',\r\n        });\r\n\r\n        toast.onDidDismiss().then(() => {\r\n          closeModal();\r\n        });\r\n        store.echo.private(`PassengerChannel-${store.profile.id}`).stopListening('.PaymentSuccessEvent');\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(error)\r\n    })\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonModal), {\n    \"is-open\": __props.isOpen,\n    onDismiss: closeModal\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_unref(IonHeader), null, {\n        default: _withCtx(() => [\n          _createVNode(_unref(IonToolbar), null, {\n            default: _withCtx(() => [\n              _createVNode(_unref(IonTitle), null, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Top Up\")\n                ]),\n                _: 1\n              }),\n              _createVNode(_unref(IonButtons), { slot: \"end\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(IonButton), {\n                    strong: true,\n                    onClick: closeModal\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"Close\")\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_unref(IonContent), { class: \"ion-padding\" }, {\n        default: _withCtx(() => [\n          _createVNode(_unref(IonList), null, {\n            default: _withCtx(() => [\n              _createVNode(_unref(IonItem), { lines: \"none\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(IonText), { class: \"ion-text-center\" }, {\n                    default: _withCtx(() => [\n                      _hoisted_1\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_unref(IonItem), { fill: \"outline\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(IonLabel), { position: \"floating\" }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"Top-Up Amount\")\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_unref(IonInput), {\n                    modelValue: topUpAmount.value,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((topUpAmount).value = $event)),\n                    type: \"number\"\n                  }, null, 8, [\"modelValue\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_unref(IonButton), {\n                expand: \"block\",\n                onClick: topUp\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Top Up\")\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"is-open\"]))\n}\n}\n\n})","import script from \"./TopUpModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TopUpModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport TopUpModal from '@/components/TopUpModal.vue';\r\nimport { useMainStore } from '@/store';\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TopUpModalTestPage',\n  setup(__props) {\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(TopUpModal, { \"is-open\": true }))\n}\n}\n\n})","import script from \"./TopUpModalTestPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TopUpModalTestPage.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","_createElementVNode","_defineComponent","__name","props","isOpen","Boolean","emits","setup","__props","emit","store","useMainStore","topUpAmount","ref","closeModal","async","getSuggestedTopUpAmount","axios","post","then","response","data","console","log","value","suggestedTopUpAmount","catch","error","onMounted","topUp","browser","open","url","item","echo","private","profile","id","listen","e","close","toast","showToast","message","color","duration","position","onDidDismiss","stopListening","_ctx","_cache","_openBlock","_createBlock","_unref","IonModal","onDismiss","default","_withCtx","_createVNode","IonHeader","IonToolbar","IonTitle","_createTextVNode","_","IonButtons","slot","IonButton","strong","onClick","IonContent","class","IonList","IonItem","lines","IonText","fill","IonLabel","IonInput","modelValue","$event","type","expand","__exports__","TopUpModal"],"sourceRoot":""}