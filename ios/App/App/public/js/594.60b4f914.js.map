{"version":3,"file":"js/594.60b4f914.js","mappings":"6LAWA,SAA4BA,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,qBACRC,MAAMC,GAER,MAAMC,GAAQC,EAAAA,EAAAA,KAERC,GAAYC,EAAAA,EAAAA,IAAI,MAEhBC,EAASJ,EAAMK,YAAYC,aAAaC,WACxCC,EAAO,EACPC,GAAmBN,EAAAA,EAAAA,IAAIH,EAAMK,YAAYC,aAAaC,YACtDG,GAAmBP,EAAAA,EAAAA,IAAIH,EAAMK,YAAYM,OAAOJ,YA8DtD,OA5DAK,EAAAA,EAAAA,KAAU,KACRC,EAAAA,EAAAA,OAAkBC,MAAMC,IACtBb,EAAUc,MAAQ,IAAID,EAAKE,IAAIC,SAASC,eAAe,qBAAsB,CAC3Ef,OAAQA,EACRI,KAAMA,EACNY,kBAAkB,IAGpB,MAAMC,EAAgB,CACpBC,IAAKC,EAAQ,MACbC,WAAY,IAAIC,OAAOV,KAAKW,KAAK,GAAI,IACrCC,OAAQ,IAAIF,OAAOV,KAAKa,MAAM,EAAG,GACjCC,OAAQ,IAAIJ,OAAOV,KAAKa,MAAM,GAAI,KAG9BE,EAAa,CACjBR,IAAKC,EAAQ,MACbC,WAAY,IAAIC,OAAOV,KAAKW,KAAK,GAAI,IACrCC,OAAQ,IAAIF,OAAOV,KAAKa,MAAM,EAAG,GACjCC,OAAQ,IAAIJ,OAAOV,KAAKa,MAAM,GAAI,KAG9BG,EAAe,IAAIN,OAAOV,KAAKiB,OAAO,CAC1CC,SAAUxB,EAAiBO,MAC3BkB,IAAKhC,EAAUc,MACfmB,KAAMd,IAGFe,EAAe,IAAIX,OAAOV,KAAKiB,OAAO,CAC1CC,SAAUvB,EAAiBM,MAC3BkB,IAAKhC,EAAUc,MACfmB,KAAML,IAcR,SAASO,IACPD,EAAaE,YAAY5B,EAAiBM,OAE1C,MAAMuB,EAAS,IAAId,OAAOV,KAAKyB,aAG/BD,EAAOE,OAAOL,EAAaM,eAC3BH,EAAOE,OAAOV,EAAaW,eAG3BxC,EAAUc,MAAM2B,UAAUJ,EAC5B,CAtBAF,KAEAO,EAAAA,EAAAA,KACE,IAAM5C,EAAMK,YAAYM,OAAOJ,aAC/B,CAACsC,EAAQC,KACPpC,EAAiBM,MAAQ6B,EAEzBR,GAAY,GAehB,GACA,IAGG,CAACU,EAAUC,MACRC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAE5C,ICpFMC,EAAc,EAEpB,G","sources":["webpack://andago-client/./src/views/driver/trip/DriverProgressPage.vue?6ad9","webpack://andago-client/./src/views/driver/trip/DriverProgressPage.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { ref, onMounted, watch } from 'vue';\r\nimport {\r\n  IonPage, IonHeader, IonToolbar, IonTitle, IonContent,\r\n} from '@ionic/vue';\r\nimport googleMaps from '@/plugins/google-map';\r\nimport { useMainStore } from '@/store';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'DriverProgressPage',\n  setup(__props) {\n\r\nconst store = useMainStore();\r\n\r\nconst googleMap = ref(null as any);\r\n\r\nconst center = store.currentTrip.pickup_place.coordinate;\r\nconst zoom = 5;\r\nconst pickUpCoordinate = ref(store.currentTrip.pickup_place.coordinate);\r\nconst driverCoordinate = ref(store.currentTrip.driver.coordinate);\r\n\r\nonMounted(() => {\r\n  googleMaps.load().then((maps: any) => {\r\n    googleMap.value = new maps.Map(document.getElementById(\"driverProgressMap\"), {\r\n      center: center,\r\n      zoom: zoom,\r\n      disableDefaultUI: true,\r\n    });\r\n\r\n    const passengerIcon = {\r\n      url: require('@/img/map_markers/passenger.png'),\r\n      scaledSize: new google.maps.Size(50, 50),\r\n      origin: new google.maps.Point(0, 0),\r\n      anchor: new google.maps.Point(25, 25)\r\n    };\r\n\r\n    const driverIcon = {\r\n      url: require('@/img/map_markers/car.png'),\r\n      scaledSize: new google.maps.Size(50, 50),\r\n      origin: new google.maps.Point(0, 0),\r\n      anchor: new google.maps.Point(25, 25)\r\n    };\r\n\r\n    const pickUpMarker = new google.maps.Marker({\r\n      position: pickUpCoordinate.value,\r\n      map: googleMap.value,\r\n      icon: passengerIcon\r\n    });\r\n\r\n    const driverMarker = new google.maps.Marker({\r\n      position: driverCoordinate.value,\r\n      map: googleMap.value,\r\n      icon: driverIcon\r\n    });\r\n\r\n    refreshMap()\r\n\r\n    watch(\r\n      () => store.currentTrip.driver.coordinate,\r\n      (newVal, oldVal) => {\r\n        driverCoordinate.value = newVal;\r\n\r\n        refreshMap()\r\n      }\r\n    )\r\n\r\n    function refreshMap() {\r\n      driverMarker.setPosition(driverCoordinate.value);\r\n\r\n      const bounds = new google.maps.LatLngBounds();\r\n\r\n      // add your points to bounds\r\n      bounds.extend(driverMarker.getPosition() as google.maps.LatLng);\r\n      bounds.extend(pickUpMarker.getPosition() as google.maps.LatLng);\r\n\r\n      // fit the map to the new bounds\r\n      googleMap.value.fitBounds(bounds);\r\n    }\r\n  });\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\"))\n}\n}\n\n})","import script from \"./DriverProgressPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DriverProgressPage.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_defineComponent","__name","setup","__props","store","useMainStore","googleMap","ref","center","currentTrip","pickup_place","coordinate","zoom","pickUpCoordinate","driverCoordinate","driver","onMounted","googleMaps","then","maps","value","Map","document","getElementById","disableDefaultUI","passengerIcon","url","require","scaledSize","google","Size","origin","Point","anchor","driverIcon","pickUpMarker","Marker","position","map","icon","driverMarker","refreshMap","setPosition","bounds","LatLngBounds","extend","getPosition","fitBounds","watch","newVal","oldVal","_ctx","_cache","_openBlock","_createElementBlock","__exports__"],"sourceRoot":""}