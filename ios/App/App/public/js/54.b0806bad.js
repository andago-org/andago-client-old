"use strict";(self["webpackChunkandago_client"]=self["webpackChunkandago_client"]||[]).push([[54],{8065:(e,l,n)=>{n.d(l,{Z:()=>p});var t=n(6252),a=n(2262),o=n(6751),u=n(9263);const s=(0,t._)("h3",null,"Enter Top-Up Amount",-1),i=(0,t.aZ)({__name:"TopUpModal",props:{isOpen:Boolean},emits:["update:isOpen","confirm","cancel"],setup(e,{emit:l}){const n=(0,u.h)(),i=(0,a.iH)(0);function d(){l("update:isOpen",!1)}async function p(){n.axios.post("/passengers/payments/getSuggestedTopUpAmount").then((e=>{const l=e.data;console.log(l),i.value=l.suggestedTopUpAmount})).catch((e=>{console.log(e)}))}(0,t.bv)((()=>{p()}));const c=()=>{n.axios.post("/passengers/payments/topUp",{topUpAmount:i.value}).then((e=>{const l=e.data;console.log(l),n.browser.open({url:l.item.url}),n.echo.private(`PassengerChannel-${n.profile.id}`).listen(".PaymentSuccessEvent",(async e=>{console.log(e),n.browser.close();const l=await n.showToast({message:"Top Up Successful",color:"success",duration:1e3,position:"middle"});l.onDidDismiss().then((()=>{d()})),n.echo.private(`PassengerChannel-${n.profile.id}`).stopListening(".PaymentSuccessEvent")}))})).catch((e=>{console.log(e)}))};return(l,n)=>((0,t.wg)(),(0,t.j4)((0,a.SU)(o.ki),{"is-open":e.isOpen,onDismiss:d},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.Gu),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.sr),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.wd),null,{default:(0,t.w5)((()=>[(0,t.Uk)("Top Up")])),_:1}),(0,t.Wm)((0,a.SU)(o.Sm),{slot:"end"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.YG),{strong:!0,onClick:d},{default:(0,t.w5)((()=>[(0,t.Uk)("Close")])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(o.W2),{class:"ion-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.q_),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.Ie),{lines:"none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.yW),{class:"ion-text-center"},{default:(0,t.w5)((()=>[s])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(o.Ie),{fill:"outline"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(o.Q$),{position:"floating"},{default:(0,t.w5)((()=>[(0,t.Uk)("Top-Up Amount")])),_:1}),(0,t.Wm)((0,a.SU)(o.pK),{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,t.Wm)((0,a.SU)(o.YG),{expand:"block",onClick:c},{default:(0,t.w5)((()=>[(0,t.Uk)("Top Up")])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"]))}}),d=i,p=d},5054:(e,l,n)=>{n.r(l),n.d(l,{default:()=>m});var t=n(6252),a=n(2262),o=n(3577),u=n(6751),s=n(6592),i=n(9263),d=n(8903),p=n(8065);const c=(0,t._)("div",{id:"map"},null,-1),r=(0,t.aZ)({__name:"PreviewPage",setup(e){var l,n,r;const U=(0,i.h)(),m=U.currentTrip,w=(0,a.iH)(!1),f=null===(l=U.pickUpPlace)||void 0===l?void 0:l.coordinate,_=5,S=null===(n=U.currentTrip)||void 0===n?void 0:n.pickup_place.coordinate,W=null===(r=U.currentTrip)||void 0===r?void 0:r.dropoff_place.coordinate,v=(0,a.iH)(null);function k(){U.axios.post("/passengers/trips/confirmTrip").then((async e=>{const l=e.data;U.currentTrip=l.trip})).catch((e=>{console.log(e.response.data)}))}function g(){var e,l;U.pickUpPlace=null===(e=U.currentTrip)||void 0===e?void 0:e.pickup_place,U.dropOffPlace=null===(l=U.currentTrip)||void 0===l?void 0:l.dropoff_place,U.axios.post("/passengers/trips/cancelTrip").then((async e=>{e.data;U.currentTrip=e.data.trip})).catch((e=>{U.currentTrip=null,console.log(e.response.data)}))}return(0,t.bv)((()=>{s.Z.load().then((e=>{v.value=new e.Map(document.getElementById("map"),{center:f,zoom:_,disableDefaultUI:!0}),s.Z.calculateRoute(S,W,v.value)}))})),(e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)((0,a.SU)(u._i),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Gu),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.sr),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.wd),null,{default:(0,t.w5)((()=>[(0,t.Uk)("Trip Details")])),_:1})])),_:1})])),_:1}),c,(0,t.Wm)((0,a.SU)(u.W2),{"scroll-y":"",scroll:"true",style:{height:"calc(100% - 56px)"}},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.q_),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Ie),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Q$),null,{default:(0,t.w5)((()=>[(0,t.Uk)("Pick-Up")])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t._)("h4",null,(0,o.zw)((0,a.SU)(m).pickup_place.name),1),(0,t._)("p",null,(0,o.zw)((0,a.SU)(m).pickup_place.address),1)])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.Ie),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Q$),null,{default:(0,t.w5)((()=>[(0,t.Uk)("Drop-Off")])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t._)("h4",null,(0,o.zw)((0,a.SU)(m).dropoff_place.name),1),(0,t._)("p",null,(0,o.zw)((0,a.SU)(m).dropoff_place.address),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.fr),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.q_),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Ie),{lines:"none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.gu),{icon:(0,a.SU)(d.W3$),slot:"start"},null,8,["icon"]),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.min_fare.text),1)])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),{slot:"end"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.min_fare.value),1)])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.Ie),{lines:"none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.gu),{icon:(0,a.SU)(d.idt),slot:"start"},null,8,["icon"]),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.distance_addon.text),1)])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),{slot:"end"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.distance_addon.value),1)])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.Ie),{lines:"none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.gu),{icon:(0,a.SU)(d.bdY),slot:"start"},null,8,["icon"]),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.duration_addon.text),1)])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),{slot:"end"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.duration_addon.value),1)])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.Ie),{lines:"none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.gu),{icon:(0,a.SU)(d.zaw),slot:"start"},null,8,["icon"]),(0,t.Wm)((0,a.SU)(u.yW),null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.total_fare.text),1)])),_:1}),(0,t.Wm)((0,a.SU)(u.yW),{slot:"end"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)((0,a.SU)(m).preview.total_fare.value),1)])),_:1})])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.jY),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Nd),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.wI),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.YG),{strong:!0,expand:"block",color:"primary",onClick:k},{default:(0,t.w5)((()=>[(0,t.Uk)("Confirm")])),_:1})])),_:1}),(0,t.Wm)((0,a.SU)(u.wI),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.Qx),{"router-direction":"back"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(u.YG),{strong:!0,expand:"block",color:"secondary",onClick:g},{default:(0,t.w5)((()=>[(0,t.Uk)("Cancel")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(p.Z,{isOpen:w.value,"onUpdate:isOpen":l[0]||(l[0]=e=>w.value=e)},null,8,["isOpen"])],64))}}),U=r,m=U}}]);
//# sourceMappingURL=54.b0806bad.js.map