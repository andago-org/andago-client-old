"use strict";(self["webpackChunkandago_client"]=self["webpackChunkandago_client"]||[]).push([[867],{3744:(e,n)=>{n.Z=(e,n)=>{const l=e.__vccOpts||e;for(const[a,o]of n)l[a]=o;return l}},1867:(e,n,l)=>{l.r(n),l.d(n,{default:()=>W});var a=l(6252),o=l(2262),t=l(6751),u=(l(7658),l(9263)),s=l(3824),d=l(8903);const i=(0,a._)("h3",null,"Enter OTP to Login",-1),m=(0,a.aZ)({__name:"EnterOtpPage",setup(e){const n=(0,u.h)(),l=(0,o.iH)(""),m=(0,o.iH)(!1);async function r(){const e={phoneNumber:n.phoneNumber,code:l.value,userType:n.userType};n.axios.post("/auth/login",e).then((async e=>{if("success"==e.data.status){n.token=e.data.token,n.profile=e.data.profile;const l=await n.showToast({message:e.data.message,duration:2e3,position:"middle"});l.onDidDismiss().then((()=>{n.showLoading({}),s.Z.go(0)}))}})).catch((function(e){n.showToast({message:e,duration:2e3,position:"middle"}),console.log(e)}))}return(0,a.YP)(l,(()=>{m.value=6===l.value.length})),(e,u)=>((0,a.wg)(),(0,a.j4)((0,o.SU)(t._i),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Gu),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.sr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.wd),null,{default:(0,a.w5)((()=>[(0,a.Uk)("Enter OTP")])),_:1}),(0,a.Wm)((0,o.SU)(t.Sm),{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.YG),{strong:!0,onClick:u[0]||(u[0]=e=>(0,o.SU)(n).ionNav.pop())},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.gu),{slot:"icon-only",icon:(0,o.SU)(d.xvD),color:"danger"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(t.W2),{class:"ion-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.q_),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Ie),{lines:"none"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.yW),{class:"ion-text-center"},{default:(0,a.w5)((()=>[i])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(t.Ie),{fill:"outline"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Q$),{position:"floating"},{default:(0,a.w5)((()=>[(0,a.Uk)("OTP Code")])),_:1}),(0,a.Wm)((0,o.SU)(t.pK),{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=e=>l.value=e),maxlength:"6",onKeypress:(0,o.SU)(n).digitOnlyInput},null,8,["modelValue","onKeypress"])])),_:1}),(0,a.Wm)((0,o.SU)(t.YG),{expand:"block",disabled:!m.value,onClick:r},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}))}}),r=m,c=r,U=e=>((0,a.dD)("data-v-fdc263a8"),e=e(),(0,a.Cn)(),e),p=U((()=>(0,a._)("h3",null,"Login with Phone Number",-1))),f=(0,a.aZ)({__name:"LoginPage",setup(e){const n=(0,u.h)(),l=(0,o.iH)(!1);async function s(){const e={phoneNumber:n.phoneNumber};n.axios.post("/auth/requestOtp",e).then((function(e){console.log(e);const l=e.data;"success"==e.data.status?n.ionNav.push(c):n.showToast({message:l.message,duration:1e3,position:"bottom"})})).catch((function(e){console.log(e)}))}return(0,a.YP)((()=>n.phoneNumber),(()=>{const e=n.phoneNumber.length>=10,a="01"===n.phoneNumber.substring(0,2);l.value=e&&a})),(e,u)=>((0,a.wg)(),(0,a.j4)((0,o.SU)(t._i),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Gu),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.sr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.wd),null,{default:(0,a.w5)((()=>[(0,a.Uk)("Login or Register")])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(t.W2),{class:"ion-padding",fullscreen:!0},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.q_),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Ie),{lines:"none"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.yW),{class:"ion-text-center"},{default:(0,a.w5)((()=>[p])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(t.Ie),{fill:"outline"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Q$),{position:"floating"},{default:(0,a.w5)((()=>[(0,a.Uk)("Phone Number")])),_:1}),(0,a.Wm)((0,o.SU)(t.pK),{modelValue:(0,o.SU)(n).phoneNumber,"onUpdate:modelValue":u[0]||(u[0]=e=>(0,o.SU)(n).phoneNumber=e),maxlength:12,onKeypress:(0,o.SU)(n).digitOnlyInput},null,8,["modelValue","onKeypress"])])),_:1}),(0,a.Wm)((0,o.SU)(t.Ie),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.cJ),{color:"danger",modelValue:(0,o.SU)(n).userType,"onUpdate:modelValue":u[1]||(u[1]=e=>(0,o.SU)(n).userType=e)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.GO),{value:"passenger"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Q$),null,{default:(0,a.w5)((()=>[(0,a.Uk)("Passenger")])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(t.GO),{value:"driver"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(t.Q$),null,{default:(0,a.w5)((()=>[(0,a.Uk)("Driver")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)((0,o.SU)(t.YG),{expand:"block",disabled:!l.value,onClick:s},{default:(0,a.w5)((()=>[(0,a.Uk)("Request OTP")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}))}});var _=l(3744);const w=(0,_.Z)(f,[["__scopeId","data-v-fdc263a8"]]),S=w,g=(0,a.aZ)({__name:"LoginNav",setup(e){return(e,n)=>((0,a.wg)(),(0,a.j4)((0,o.SU)(t.O1),{root:S}))}}),h=g,W=h}}]);
//# sourceMappingURL=867.730cdab8.js.map