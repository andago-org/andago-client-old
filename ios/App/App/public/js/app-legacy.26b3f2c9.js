(()=>{var e={1993:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=1993,e.exports=t},3096:(e,t,r)=>{"use strict";r(7726),r(3473),r(1286);var a=r(9963),n=r(6252),o=r(2262),i=r(6751),s=r(9263);const c=(0,n.aZ)({__name:"App",setup(e){const t=(0,s.h)();return t.initCometChat(),setInterval((()=>{console.log("Get Profile"),t.loggedIn&&t.getData()}),5e3),(e,t)=>((0,n.wg)(),(0,n.j4)((0,o.SU)(i.dr),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,o.SU)(i.jP))])),_:1}))}}),l=c,d=l;var p=r(3824),h=(r(8851),r(1292),r(1633),r(1045),r(4775),r(2299),r(3423),r(4687),r(9147),r(6250),r(6086)),u=r(5929);const g=(0,h.WB)();g.use(u.Z);const v={},f=(0,a.ri)(d).use(i.oX,v).use(p.Z).use(g);f.provide("mainStore",(0,s.h)()),p.Z.isReady().then((()=>{f.mount("#app")}))},3824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});r(3948),r(6699);var a=r(1089),n=r(9263);const o=[{path:"/test",component:()=>r.e(673).then(r.bind(r,673)),children:[{path:"PusherPrivateTest",component:()=>r.e(494).then(r.bind(r,3494))},{path:"TopUpModalTest",component:()=>r.e(445).then(r.bind(r,1445))},{path:"ModalStackTestPage",component:()=>r.e(394).then(r.bind(r,394))},{path:"CometChatTestPage",component:()=>r.e(80).then(r.bind(r,2080))},{path:"SearchDriverPage",component:()=>r.e(329).then(r.bind(r,5329))}]},{path:"/:catchAll(.*)",redirect:"/login"},{path:"/login",component:()=>Promise.all([r.e(903),r.e(867)]).then(r.bind(r,1867)),beforeEnter:async(e,t,r)=>{const a=(0,n.h)();a.token?r("/register"):r()}},{path:"/register",component:()=>Promise.all([r.e(903),r.e(553),r.e(233)]).then(r.bind(r,4233)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();if(o.token)if(null!==(a=o.profile)&&void 0!==a&&a.profile_completed){var i;r(`/${null===(i=o.profile)||void 0===i?void 0:i.userType}`)}else r();else r("/login")}},{path:"/passenger",component:()=>Promise.all([r.e(903),r.e(778)]).then(r.bind(r,3778)),children:[{path:"",redirect:"/passenger/trip"},{path:"profile",component:()=>Promise.all([r.e(553),r.e(354)]).then(r.bind(r,7332))},{path:"trip",component:()=>r.e(969).then(r.bind(r,2969)),children:[{path:"",redirect:"/passenger/trip/AddressPage"},{path:"AddressPage",component:()=>Promise.all([r.e(903),r.e(655)]).then(r.bind(r,6348)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();[void 0].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/passenger/trip/PreviewPage")}},{path:"PreviewPage",component:()=>Promise.all([r.e(903),r.e(592),r.e(54)]).then(r.bind(r,5054)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();["pending"].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/passenger/trip/SearchDriverPage")}},{path:"SearchDriverPage",component:()=>r.e(329).then(r.bind(r,5329)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();["confirmed"].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/passenger/trip/PassengerProgressPage")}},{path:"PassengerProgressPage",component:()=>Promise.all([r.e(592),r.e(686)]).then(r.bind(r,7686)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();["accepted"].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/passenger/trip")}}]},{path:"chat",component:()=>r.e(516).then(r.bind(r,8516))},{path:"settings",component:()=>r.e(512).then(r.bind(r,441))}]},{path:"/driver",component:()=>Promise.all([r.e(903),r.e(592),r.e(273)]).then(r.bind(r,2273)),children:[{path:"",redirect:"/driver/trip"},{path:"trip",component:()=>r.e(304).then(r.bind(r,3304)),children:[{path:"",redirect:"/driver/trip/IdlePage"},{path:"IdlePage",component:()=>Promise.all([r.e(592),r.e(788)]).then(r.bind(r,8788)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();[void 0].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/driver/trip/DriverProgressPage")}},{path:"DriverProgressPage",component:()=>Promise.all([r.e(592),r.e(594)]).then(r.bind(r,8594)),beforeEnter:async(e,t,r)=>{var a;const o=(0,n.h)();["accepted"].includes(null===(a=o.currentTrip)||void 0===a?void 0:a.status)?r():r("/driver/trip")}}]}]}],i=(0,a.p7)({history:(0,a.PO)("/"),routes:o});i.beforeEach((async e=>{const t=(0,n.h)(),r=e.path.split("/");var a,o,i;if(["driver","passenger"].includes(r[1]))return t.token&&null!==(a=t.profile)&&void 0!==a&&a.profile_completed?e.path.split("/")[1]==(null===(o=t.profile)||void 0===o?void 0:o.userType)||{path:`/${null===(i=t.profile)||void 0===i?void 0:i.userType}`}:{path:"/login"}}));const s=i},9263:(e,t,r)=>{"use strict";r.d(t,{h:()=>P});r(8862),r(7658),r(4916);var a,n,o,i=r(6086),s=r(6154),c=r(3824),l=r(5332),d=r(411),p=r(7806);(function(e){e["Passenger"]="passenger",e["Driver"]="driver"})(a||(a={})),function(e){e["Male"]="male",e["Female"]="female"}(n||(n={})),function(e){e["View"]="view",e["Create"]="create",e["Edit"]="edit"}(o||(o={}));var h=r(4571),u=r(6606),g=r.n(u),v=r(4554),f=r(6751),m=r(2298),b=r(9534);const y=s.Z.create({baseURL:"http://207.148.72.68/api",headers:{Accept:"application/json","Content-Type":"application/json"}}),w=new v.Z({broadcaster:"pusher",key:"a294542618ad0c79d7b7",cluster:"ap1",encrypted:!0,authEndpoint:"http://localhost/api/broadcasting/auth"}),P=(0,i.Q_)({id:"mainStore",state:()=>({userType:a.Passenger,phoneNumber:"",name:"",gender:n.Male,birthDate:(0,m.Z)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),carPlateNumber:"",token:"",profile:{},currentTrip:null,selectedVehicle:null,vehicles:[],creditWallet:0,driverMode:!1,coordinate:{lat:0,lng:0},fakeGeolocation:!1,pickUpPlace:{},dropOffPlace:{},distance:0,duration:"0 min",fare:0,myTrip:{},acceptedDriver:{},acceptedTrip:{},channel:null,ionToast:{},ionLoading:{},syncedData:{},suggestedTopUpAmount:0}),getters:{async currentPosition(){const e=await d.b.getCurrentPosition(),t={lat:e.coords.latitude,lng:e.coords.longitude};return t},axios(){return y.defaults.headers["Accept"]="application/json",y.defaults.headers["Authorization"]=`Bearer ${this.token}`,y},echo(){return w.options.auth={headers:{Authorization:"Bearer "+this.token}},w.connect(),w},ionNav(){return document.querySelector("ion-nav")},localStorage(){return h.u},acceptImageFileFormats(){return"image/jpeg, image/png, image/jpg"},browser(){return p.A},loggedIn(){return""!==this.token},searchingForDriver(){return"confirmed"===this.currentTrip.status},chatRoomName(){var e,t,r,a;return"passenger"==this.profile.userType?null===(e=this.currentTrip)||void 0===e||null===(t=e.driver)||void 0===t?void 0:t.user.name:null===(r=this.currentTrip)||void 0===r||null===(a=r.passenger)||void 0===a?void 0:a.user.name}},actions:{initCometChat(){const e="23694678a67dabe9",t="eu",r=(new b.CometChat.AppSettingsBuilder).subscribePresenceForAllUsers().setRegion(t).autoEstablishSocketConnection(!0).build();b.CometChat.init(e,r).then((e=>{console.log("Initialization completed successfully",e)}),(e=>{console.log("Initialization failed with error:",e)}))},async getData(){this.axios.post("/auth/getData").then((async e=>{const t=e.data;this.profile=t.profile,this.currentTrip=t.currentTrip})).catch((async e=>{console.log(e)}))},async updatePosition(e){const t={position:e};this.axios.post("/drivers/updatePosition",t).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))},async showToast(e){return this.ionToast=await f.Mn.create(e),await this.ionToast.present(),this.ionToast},async showLoading(e){return this.ionLoading=await f.G0.create(e),await this.ionLoading.present(),this.ionLoading},async showModal(e){const t=await f.Fy.create(e);return await t.present(),t},async logout(){let e="";this.axios.post("/auth/logout").then((async t=>{e=t.data.message})).catch((async t=>{console.log(t),e=t.data.message}));const t=await this.showToast({message:e,duration:1e3,position:"middle"});t.onDidDismiss().then((()=>{this.profile=null,this.token="",this.localStorage.remove({key:"data"}),this.showLoading({}),c.Z.go(0)}))},setHeaders(){y.defaults.headers.common["Authorization"]=`Bearer ${this.token}`},async openMap(e){const t=`https://www.google.com/maps/dir/?api=1&destination=${e.lat},${e.lng}`;await l.h.openUrl({url:t})},async getGeolocation(){const e=await d.b.getCurrentPosition(),t={lat:e.coords.latitude,lng:e.coords.longitude};return t},async getDistanceMatrix(e,t){try{this.setHeaders();const r={start:e,end:t},a=await y.post("/maps/getDistanceMatrix",r);if(200===a.status)return a.data}catch(r){console.error("Error performing the request:",r)}},async getPlaces(e){try{var t,r;this.setHeaders();let a={lat:null===(t=this.coordinate)||void 0===t?void 0:t.lat,lng:null===(r=this.coordinate)||void 0===r?void 0:r.lng};if(!this.fakeGeolocation){const e=await d.b.getCurrentPosition();a={lat:e.coords.latitude,lng:e.coords.longitude}}const n={query:e,lat:a.lat,lng:a.lng},o=await y.post("/users/maps/getPlaces",n);if(200===o.status)return o.data.results}catch(a){console.error("Error performing the request:",a)}},async loadFromStorage(){const{value:e}=await h.u.get({key:"data"}),{value:t}=await h.u.get({key:"driverMode"}),r=JSON.parse(e||"{}");this.driverMode="true"===t||!1,r&&(this.token=r.token,this.token)},async saveToStorage(){const e={token:this.token};await h.u.set({key:"driverMode",value:this.driverMode.toString()}),await h.u.set({key:"data",value:JSON.stringify(e)})},setUserToken(e){this.token=e,this.saveToStorage()},clearUserToken(){this.token="",this.saveToStorage()},async confirmTrip(){try{this.setHeaders(),this.acceptedDriver=null;const e=await y.post("/trips/confirmTrip");if(200===e.status)return console.log("Trip confirm",e.data),e.data}catch(e){console.error("Error performing the request:",e)}},async acceptTrip(e){try{this.setHeaders();const t={trip_id:e},r=await y.post("/trips/acceptTrip",t);if(200===r.status)return console.log(r.data),r.data}catch(t){console.error("Error performing the request:",t)}},async getVehicles(){try{this.setHeaders();const e=await y.get("/vehicles");200===e.status&&(console.log(e.data),this.vehicles=[],e.data.forEach((e=>{this.vehicles.push({...e,controlMode:o.View})})))}catch(e){console.error("Error performing the request:",e)}},async createVehicle(e){try{this.setHeaders();const t={name:e.name},r=await y.post("/vehicles",t);if(200===r.status)return this.vehicles=r.data,r.data}catch(t){console.error("Error performing the request:",t)}},async updateVehicle(e){try{this.setHeaders();const t={id:e.id,name:e.name},r=await y.post("/vehicles/updateVehicle",t);if(200===r.status)return this.vehicles=r.data,r.data}catch(t){console.error("Error performing the request:",t)}},async selectVehicle(e){try{this.setHeaders(),this.selectedVehicle=e;const t={id:e.id},r=await y.post("/vehicles/selectVehicle",t);return this.vehicles=[],this.vehicles=r.data,r.data}catch(t){console.error("Error performing the request:",t)}},async deleteVehicle(e){try{this.setHeaders();const t={id:e.id},r=await y.post("/vehicles/deleteVehicle",t);if(200===r.status)return this.vehicles=r.data,r.data}catch(t){console.error("Error performing the request:",t)}},connectChannel(e){const t=new(g())("a294542618ad0c79d7b7",{cluster:"ap1"});this.channel=t.subscribe(e)},capitalizeFirstLetter(e){return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)},convertToCapitalNumeric(e){const t=/[A-Z0-9]/,r=e.target,a=r.value;e instanceof CompositionEvent||setTimeout((()=>{const n=r.value.toUpperCase().split("").filter((e=>t.test(e))).join("");r.value!==a&&(r.value=n,e.preventDefault(),r.dispatchEvent(new InputEvent("input")))}))},digitOnlyInput(e){/[0-9]/.test(e.key)||e.preventDefault()},validateNotEmpty(e){return e.length>0},isObjectEmpty(e){return 0===Object.keys(e).length}},persist:{enabled:!0}})}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,o)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,n,o]=e[d],s=!0,c=0;c<a.length;c++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,n,o]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[]))})(),(()=>{r.u=e=>"js/"+e+"-legacy."+{54:"b0806bad",74:"e03a3084",78:"292bad96",80:"b974c544",233:"2de21097",273:"7d1bba49",304:"60d43892",329:"25e4aafd",338:"28a2970f",354:"0eb0c51d",394:"71b92c12",445:"336adcc3",494:"71a654bb",512:"2d7f0d71",516:"fb5d7e74",539:"e086d757",541:"ac2f8eef",544:"2964860c",553:"ef6a499a",576:"cfe56f43",592:"86d2b030",594:"60b4f914",642:"6f0e8fd2",655:"9ea0c421",673:"8d71ba66",686:"e015f60a",753:"833a0f79",775:"f5c7652e",778:"2f67ae24",788:"cb1bd0a6",805:"fc3e34ff",867:"730cdab8",903:"c74da71c",969:"cf8de54e",990:"c455c5db"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/"+e+"."+{54:"55dbc01d",233:"55149417",273:"bbce9572",354:"21fcdbc0",655:"b08df4fc",788:"2534ce68",867:"5fe3e05a"}[e]+".css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="andago-client:";r.l=(a,n,o,i)=>{if(e[a])e[a].push(n);else{var s,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var p=l[d];if(p.getAttribute("src")==a||p.getAttribute("data-webpack")==t+o){s=p;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=a),e[a]=[n];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(u);var n=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(r))),t)return t(r)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var i=r=>{if(o.onerror=o.onload=null,"load"===r.type)a();else{var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,o.parentNode&&o.parentNode.removeChild(o),n(c)}};return o.onerror=o.onload=i,o.href=t,r?r.parentNode.insertBefore(o,r.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var n=r[a],o=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===e||o===t))return n}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){n=i[a],o=n.getAttribute("data-href");if(o===e||o===t)return n}},a=a=>new Promise(((n,o)=>{var i=r.miniCssF(a),s=r.p+i;if(t(i,s))return n();e(a,s,null,n,o)})),n={143:0};r.f.miniCss=(e,t)=>{var r={54:1,233:1,273:1,354:1,655:1,788:1,867:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=a(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))}}})(),(()=>{var e={143:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var o=new Promise(((r,a)=>n=e[t]=[r,a]));a.push(n[2]=o);var i=r.p+r.u(t),s=new Error,c=a=>{if(r.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,n[1](s)}};r.l(i,c,"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[i,s,c]=a,l=0;if(i.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var d=c(r)}for(t&&t(a);l<i.length;l++)o=i[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},a=self["webpackChunkandago_client"]=self["webpackChunkandago_client"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[998],(()=>r(3096)));a=r.O(a)})();
//# sourceMappingURL=app-legacy.26b3f2c9.js.map